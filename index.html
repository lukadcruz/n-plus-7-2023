<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />

    <title>N+7</title>

    <meta name="description" content="A simple exercise template." />
    <!-- styles -->
    <style></style>
  </head>
  <body>
    <h1>N+7</h1>
    <h2>Source text</h2>
    <p id="sourceText"></p>
    <h2>New text</h2>
    <p id="newText"></p>
    <!-- script -->
    <script>
      let nouns;
      const sourceText = `LEE’S SUMMIT, MO—Expressing concern over the youngster’s suspiciously sparse work history and total lack of professional references, local factory manager Toby Walters asked a 12-year-old job applicant Tuesday to explain a 12-year employment gap on his résumé. “So, it says here, young man, that you haven’t had a job since you were zero years old—that’s an awfully long time to just be sitting at home, unemployed,” said Walters, adding that he could understand if the seventh-grader had taken off a few years here and there to take care of an aging relative, recover from an illness, or start a family, but failing to keep a steady job for his entire young life was a bit of a stretch. “Look, I don’t mean to be harsh, but I have several applicants here who are 12 years old and have held down jobs all their lives. It didn’t matter if they were homeless, sick, or even had a limb cut off right here in the factory. How are you supposed to compete with them when you haven’t been employed since you left the womb? Now you’re basically aging out of the workforce.” At press time, Walters told reporters he decided to give the 12-year-old upstart a chance, with the caveat that he fully expected his newest employee to immediately die on the job.`;
      const wordOffset = 7;
      function generateNewText(text) {
        let splitText = text.split(" ");
        let newText = "";
        for (const word of splitText) {
          let indexInList = nouns.indexOf(word);
          let newWord;
          if (indexInList > -1) {
            if (nouns[indexInList + wordOffset]) {
              newWord = nouns[indexInList + wordOffset];
            }
          } else {
            newWord = word;
          }
          if (newText === "") {
            newText = newWord;
          } else {
            newText = newText + " " + newWord;
          }
        }
        return newText;
      }
      function initPoem(nounList) {
        nouns = nounList.split(/\r?\n/);
        newText = generateNewText(sourceText);
        document.getElementById("sourceText").innerHTML = sourceText;
        document.getElementById("newText").innerHTML = newText;
      }
      fetch("nounlist.txt")
        .then((response) => response.text())
        .then((textContent) => initPoem(textContent));
    </script>
    <!-- include the Glitch button to show what the webpage is about and
          to make it easier for folks to view source and remix -->
    <div
      class="glitchButton"
      style="position: fixed; top: 20px; right: 20px"
    ></div>
    <script src="https://button.glitch.me/button.js" defer></script>
  </body>
</html>
